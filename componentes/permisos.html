<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>UWIGO</title>
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport" />

  <!-- ================== BEGIN BASE CSS STYLE ================== -->
  
  <link href="../assets/plugins/jquery-ui/jquery-ui.min.css" rel="stylesheet" />
  <link href="../assets/plugins/bootstrap/4.1.0/css/bootstrap.min.css" rel="stylesheet" />
  <link href="../assets/plugins/font-awesome/5.0/css/fontawesome-all.min.css" rel="stylesheet" />
  <link href="../assets/plugins/animate/animate.min.css" rel="stylesheet" />
  <link href="../assets/css/default/style.min.css" rel="stylesheet" />
  <link href="../assets/css/default/style-responsive.min.css" rel="stylesheet" />
  <link href="../assets/css/default/theme/default.css" rel="stylesheet" id="theme" />
  <link href="../assets/style.css" rel="stylesheet" />
  <!-- ================== END BASE CSS STYLE ================== -->

  <!-- ================== BEGIN BASE JS ================== -->
  <script src="../assets/plugins/pace/pace.min.js"></script>
  <!-- ================== END BASE JS ================== -->

  <!-- ================== BEGIN PAGE CSS ================== -->
  <link href="../assets/plugins/DataTables/media/css/dataTables.bootstrap.min.css" rel="stylesheet" />
  <link href="../assets/plugins/DataTables/extensions/Responsive/css/responsive.bootstrap.min.css" rel="stylesheet" />
  <link href="../assets/plugins/dropzone/min/dropzone.min.css" rel="stylesheet" />
  <link href="../assets/plugins/switchery/switchery.min.css" rel="stylesheet" />
  <link href="../assets/plugins/powerange/powerange.min.css" rel="stylesheet" />
  <link href="../assets/plugins/jstree/dist/themes/default/style.min.css" rel="stylesheet" />
  <link href="../assets/plugins/jquery-smart-wizard/src/css/smart_wizard.css" rel="stylesheet" />
  <!-- form plugins -->
  <link href="../assets/plugins/bootstrap-select/bootstrap-select.min.css" rel="stylesheet" />
  <link href="../assets/plugins/select2/dist/css/select2.min.css" rel="stylesheet" />
  <!-- ================== END PAGE CSS ================== -->
</head>
<body>
  <!-- begin #page-loader -->
  <div id="page-loader" class="fade show"><span class="spinner"></span></div>
  <!-- end #page-loader -->

  <!-- begin #page-container -->
  <div id="page-container" class="page-container fade page-without-sidebar page-header-fixed page-with-top-menu">

    <!-- begin #header -->
    <div id="header" class="header navbar-default">
      <!-- begin navbar-header -->
      <div class="navbar-header">
        <a href="dashboard.html" class="navbar-brand"><span class="navbar-logo"></span> <b>UWIGO</b> Nombre Empresa</a>
        <button type="button" class="navbar-toggle" data-click="top-menu-toggled">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
      </div>
      <!-- end navbar-header -->

      <!-- begin header navigation right -->
      <ul class="navbar-nav navbar-right">

        <li class="dropdown navbar-user">
          <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown">
            <span class="d-none d-md-inline">Nombre Usuario</span> <b class="caret"></b>
          </a>
          <div class="dropdown-menu dropdown-menu-right">
            <a href="perfil-usuario.html" class="dropdown-item">Editar Perfil</a>
            <a href="login.html" class="dropdown-item">Salir</a>
            <div class="dropdown-divider"></div>
            <a href="#m-cambiar-contrasena" class="dropdown-item" data-toggle="modal"><i class="far fa-star"></i> Cambiar Contraseña</a>
          </div>
        </li>

        <li class="dropdown">
          <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown">
            <i class="fa fa-cogs"></i><b class="caret"></b>
          </a>
          <div class="dropdown-menu dropdown-menu-right">
            <a href="empresa-lista.html" class="dropdown-item">Empresas</a>
            <a href="usuarios.html" class="dropdown-item">Usuarios</a>
            <div class="dropdown-divider"></div>
            <a href="#m-cambiar-empresa" class="dropdown-item" data-toggle="modal"><i class="far fa-star"></i> Cambiar de Empresa</a>
          </div>
        </li>
      </ul>
      <!-- end header navigation right -->
    </div>
    <!-- end #header -->

    <!-- begin #top-menu -->
    <div id="top-menu" class="top-menu">
      <!-- begin top-menu nav -->
      <ul class="nav">
        <li class="active">
          <a href="dashboard.html">
            <i class="fa fa-th-large"></i>
            <span>Dashboard</span>
          </a>
        </li>
        <li class="has-sub">
          <a href="javascript:;">
            <b class="caret"></b>
            <span>Cuentas</span>
          </a>
          <ul class="sub-menu">
            <li><a href="bancos.html">Bancos</a></li>
            <li><a href="ventas.html">Ventas</a></li>
            <li><a href="compras.html">Compras</a></li>
            <li><a href="remuneraciones-lista.html">Remuneraciones</a></li>
            <li><a href="inventario.html">Inventario</a></li>
            <li><a href="gastos.html">Gastos</a></li>
            <li><a href="activos-fijos.html">Activo Fijo</a></li>
          </ul>
        </li>
        <li class="has-sub">
          <a href="javascript:;">
            <b class="caret"></b>
            <span>Reportes</span>
          </a>
          <ul class="sub-menu">
            <li><a href="reporte.html">Reporte 1</a></li>
            <li><a href="reporte.html">Reporte 2</a></li>
          </ul>
        </li>
        <li class="has-sub">
          <a href="javascript:;">
            <b class="caret"></b>
            <span>Contactos</span>
          </a>
          <ul class="sub-menu">
            <li><a href="contactos.html">Todos los contactos</a></li>
            <div class="dropdown-divider"></div>
            <li><a href="proveedores-lista.html"><i class="far fa-star"></i> Proveedores</a></li>
            <li><a href="clientes-lista.html"><i class="far fa-star"></i> Clientes</a></li>
          </ul>
        </li>
        <li class="has-sub">
          <a href="javascript:;">
            <b class="caret"></b>
            <span>Configuración</span>
          </a>
          <ul class="sub-menu">
            <li><a href="">...</a></li>
          </ul>
        </li>
      </ul>
      <!-- end top-menu nav -->
    </div>
    <!-- end #top-menu -->

    <!-- begin #breadcrumb -->
    <div class="section-breadcrumb">
      <div class="pull-right">
        <div class="mt-2">
          <a href="#m-video" class="btn btn-primary btn-icon btn-circle btn-sm" data-toggle="modal"><i class="fa fa-video"></i></a>
          <a class="btn btn-primary btn-icon btn-circle btn-sm" href="javascript:void(0);" onclick="javascript:introJs().start();"><i class="fa fa-comment-dots"></i></a>
        </div>
      </div>

      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="javascript:;">Módulo</a></li>
        <li class="breadcrumb-item active"><a href="javascript:;">Sub-Módulo</a></li>
      </ol>
    </div>
    <!-- end #breadcrumb -->

    <!-- begin #content -->
    <div id="content" class="content">
      <div class="panel panel-default" data-sortable-id="index-1">
        <div class="panel-body">

          <fieldset class="mb-4">

            <legend class="m-b-15">Permisos</legend>

            <div id="app-permiso" class="row">

              <div class="form-group col-md-3">
                <label for="">Perfil</label>
                <select class="s-perfil multiple-select2 form-control form-control-sm" data-placeholder="Seleccionar Perfil">
                  <option value="" selected>Seleccionar Perfil</option>
                  <option value="1">Administrador</option>
                  <option value="2">Contador</option>
                  <option value="3">Tesoría - Pagos</option>
                  <option value="4">Tesoría - Conciliación</option>
                </select>
              </div>

              <div class="form-group col-md-4">
                <label for="">Buscar</label>
                <input type="text" id="buscar" class="form-control form-control-sm" placeholder="Buscar">
              </div>

              <div class="col-sm-12">
                <div class="row">
                  <div class="col-md-6">
                    <table class="table table-striped table-bordered table-permisos" data-tipo="basico">
                      <thead>
                        <tr>
                          <th colspan="3" class="text-center">Permisos Básicos</th>
                        </tr>
                        <tr>
                          <th>Modulo</th>
                          <th>Entidad</th>
                          <th>Permisos</th>
                        </tr>
                      </thead>
                      <tbody></tbody>
                    </table>
                  </div>
                  <div class="col-md-6">
                    <table class="table table-striped table-bordered table-permisos" data-tipo="extra">
                      <thead>
                        <tr>
                          <th colspan="3" class="text-center">Permisos Transaccionales</th>
                        </tr>
                        <tr>
                          <th>Modulo</th>
                          <th>Entidad</th>
                          <th>Permisos</th>
                        </tr>
                      </thead>
                      <tbody></tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>

          </fieldset>

          <div class="pull-right">
            <a href="usuarios.html" class="btn btn-sm btn-white m-r-5">Cancelar</a>
            <a href="usuarios.html" class="btn btn-sm btn-primary">Aceptar</a>
          </div>
        </div>

      </div>
    </div>
    <!-- end #content -->

  </div>
  <!-- end #page-container -->

  <!-- begin scroll to top btn -->
  <a href="javascript:;" class="btn btn-icon btn-circle btn-success btn-scroll-to-top fade" data-click="scroll-top"><i class="fa fa-angle-up"></i></a>
  <!-- end scroll to top btn -->

  <!-- ================== BEGIN BASE JS ================== -->
  <script src="../assets/plugins/jquery/jquery-3.2.1.min.js"></script>
  <script src="../assets/plugins/jquery-ui/jquery-ui.min.js"></script>
  <script src="../assets/plugins/bootstrap/4.1.0/js/bootstrap.bundle.min.js"></script>
  <script src="../assets/plugins/slimscroll/jquery.slimscroll.min.js"></script>
  <script src="../assets/plugins/js-cookie/js.cookie.js"></script>
  <script src="../assets/js/theme/default.min.js"></script>
  <script src="../assets/js/apps.min.js"></script>

  <!-- ================== END BASE JS ================== -->

  <!-- ================== BEGIN PAGE LEVEL JS ================== -->
  <script src="../assets/plugins/highlight/highlight.common.js"></script>
  <script src="../assets/js/demo/render.highlight.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.2/d3.min.js"></script>
  <script src="../assets/plugins/DataTables/media/js/jquery.dataTables.js"></script>
  <script src="../assets/plugins/DataTables/media/js/dataTables.bootstrap.min.js"></script>
  <script src="../assets/plugins/DataTables/extensions/Responsive/js/dataTables.responsive.min.js"></script>
  <script src="../assets/plugins/dropzone/min/dropzone.min.js"></script>
  <script src="../assets/plugins/switchery/switchery.min.js"></script>
  <script src="../assets/plugins/powerange/powerange.min.js"></script>
  <script src="../assets/plugins/bootstrap-sweetalert/sweetalert.min.js"></script>
  <script src="../assets/plugins/jstree/dist/jstree.min.js"></script>
  <script src="../assets/plugins/ionRangeSlider/js/ion-rangeSlider/ion.rangeSlider.min.js"></script>
  <script src="../assets/plugins/bootstrap-colorpicker/js/bootstrap-colorpicker.min.js"></script>
  <script src="../assets/plugins/masked-input/masked-input.min.js"></script>
  <script src="../assets/plugins/bootstrap-timepicker/js/bootstrap-timepicker.min.js"></script>
  <script src="../assets/plugins/bootstrap-combobox/js/bootstrap-combobox.js"></script>
  <script src="../assets/plugins/bootstrap-select/bootstrap-select.min.js"></script>
  <script src="../assets/plugins/bootstrap-daterangepicker/moment.js"></script>
  <script src="../assets/plugins/bootstrap-daterangepicker/daterangepicker.js"></script>
  <script src="../assets/plugins/select2/dist/js/select2.min.js"></script>
  <script src="../assets/plugins/bootstrap-eonasdan-datetimepicker/build/js/bootstrap-datetimepicker.min.js"></script>
  <script src="https://unpkg.com/vue"></script>
  <script src="../assets/js/demo/table-manage-default.demo.js"></script>
  <script src="../assets/js/demo/form-plugins.demo.js"></script>
  <script src="../assets/js/demo/form-slider-switcher.demo.min.js"></script>
  <script src="../assets/js/demo/ui-tree.demo.js"></script>
  <script src="../assets/js/demo/ui-modal-notification.demo.js"></script>
  <script src="https://unpkg.com/vue-chartjs/dist/vue-chartjs.min.js"></script>
  <script src="../assets/script.js"></script>
  <script src="permisos.js"></script>
  <script src="permisos.css"></script>
  <!-- ================== END PAGE LEVEL JS ================== -->

  <script>


  /*
  Template Name: Color Admin - Responsive Admin Dashboard Template build with Twitter Bootstrap 3 & 4
  Version: 4.1.0
  Author: Sean Ngu
  Website: http://www.seantheme.com/color-admin-v4.1/admin/
  */

  let app_permiso = new Vue({
    el: '#app-permiso',
    data: {
      permisos: permisos
    },
    created: function () {

      // inicio
      // $('#permiso-nuevo').html('')
      //
      // var temp = ''
      // temp += '<div class="col-md-6">'
      // temp += '<table class="table table-striped table-bordered table-permisos" data-tipo="basico">'
      // temp += '<thead>'
      // temp += '<tr>'
      // temp += '<th colspan="3" class="text-center">Permisos Básicos</th>'
      // temp += '</tr>'
      // temp += '<tr>'
      // temp += '<th>Modulo</th>'
      // temp += '<th>Entidad</th>'
      // temp += '<th>Permisos</th>'
      // temp += '</tr>'
      // temp += '</thead>'
      // temp += '<tbody></tbody>'
      // temp += '</table></div><div class="col-md-6">'
      // temp += '<table class="table table-striped table-bordered table-permisos" data-tipo="extra">'
      // temp += '<thead>'
      // temp += '<tr>'
      // temp += '<th colspan="3" class="text-center">Permisos Transaccionales</th>'
      // temp += '</tr>'
      // temp += '<tr>'
      // temp += '<th>Modulo</th>'
      // temp += '<th>Entidad</th>'
      // temp += '<th>Permisos</th>'
      // temp += '</tr>'
      // temp += '</thead>'
      // temp += '<tbody></tbody>'
      // temp += '</table></div>'
      //
      // $('#permiso-nuevo').append(temp)
      //
      // permisos = $('#id_permissions option')
      // // permisos = $('#id_permissions option:selected')
      //
      // for (var i = 0; i < permisos.length; i++) {
      //
      //   var permiso    = permisos[i].text.split("|")
      //   var id         = permisos[i].value
      //   var tipo       = 'basico'
      //   var modulo     = permiso[0]
      //   var submodulo  = permiso[1]
      //   var icon       = 'fa fa-cogs'
      //   var nombre     = permiso[2]
      //   var estado     = $(permisos[i]).prop('selected')
      //
      //   var table   = $('.table-permisos[data-tipo="'+tipo+'"]')
      //   var tr      = table.find('tr[data-module="'+modulo+'"][data-submodule="'+submodulo+'"]')
      //
      //   if(tr.length == 0){
      //
      //     var temp = '';
      //     temp += '<tr data-module="@module-name" data-submodule="@submodule-name">'
      //     temp += '<td>@module-name</td>'
      //     temp += '<td>@submodule-name</td>'
      //     temp += '<td data-tipo="permiso">'
      //     temp += '<input type="checkbox" class="check-permiso">'
      //     temp += '</td>'
      //     temp += '</tr>'
      //
      //     temp = temp.replace(/@module-name/g, modulo);
      //     temp = temp.replace(/@submodule-name/g, submodulo);
      //
      //     table.find('tbody').append(temp)
      //
      //   }
      //
      //   icono = ''
      //   icono += '<a href="javascript:;" class="btn btn-xs btn-permission @permiso-estado ml-1" data-id="@permiso-id" data-toggle="tooltip" data-placement="top" title="@permission-name">'
      //   icono += '<i class="@permission-icon"></i>'
      //   icono += '</a>'
      //
      //   icono = icono.replace(/@permiso-id/g, id);
      //   icono = icono.replace(/@permiso-estado/g, estado ? 'btn-primary' : 'btn-grey');
      //   icono = icono.replace(/@permission-icon/g, icon);
      //   icono = icono.replace(/@permission-name/g, nombre);
      //
      //   table.find('tr[data-module="'+modulo+'"][data-submodule="'+submodulo+'"] td[data-tipo="permiso"]').append(icono)
      //
      // }
      // $('[data-toggle="tooltip"]').tooltip()
      //
      // $('.btn-permission').click(function(){
      //   var id = $(this).data('id')
      //   if ($(this).hasClass("btn-primary")){
      //     $('#id_permissions option[value='+id+']').attr('selected', false);
      //     $(this).removeClass("btn-primary")
      //     $(this).addClass("btn-grey")
      //   } else{
      //     $('#id_permissions option[value='+id+']').attr('selected', true);
      //     $(this).addClass("btn-primary")
      //     $(this).removeClass("btn-grey")
      //   }
      // })
      //
      // $('.check-permiso').click(function(){
      //   if($(this).is(':checked')){
      //     $(this).parent().find('.btn-permission').addClass("btn-primary")
      //     $(this).parent().find('.btn-permission').removeClass("btn-grey")
      //   } else{
      //     $(this).parent().find('.btn-permission').removeClass("btn-primary")
      //     $(this).parent().find('.btn-permission').addClass("btn-grey")
      //   }
      // })
      //
      // $('.check-permiso').click(function(){
      //   if($(this).is(':checked')){
      //     $(this).parent().find('.btn-permission').addClass("btn-primary")
      //     $(this).parent().find('.btn-permission').removeClass("btn-grey")
      //     $(this).parent().find('.btn-permission').each(function(index) {
      //       $('#id_permissions option[value='+$(this).data('id')+']').attr('selected', true);
      //     });
      //   } else{
      //     $(this).parent().find('.btn-permission').removeClass("btn-primary")
      //     $(this).parent().find('.btn-permission').addClass("btn-grey")
      //     $(this).parent().find('.btn-permission').each(function( index ) {
      //       $('#id_permissions option[value='+$(this).data('id')+']').attr('selected', false);
      //     });
      //   }
      // })
      // fin

      // for (var i = 0; i < this.permisos.length; i++) {
      //
      //   var permiso = this.permisos[i]
      //   var table   = $('.table-permisos[data-tipo="'+permiso.tipo+'"]')
      //   var tr      = table.find('tr[data-module="'+permiso.modulo+'"][data-submodule="'+permiso.submodulo+'"]')
      //
      //   if(tr.length == 0){
      //
      //     var temp = '';
      //     temp += '<tr data-module="@module-name" data-submodule="@submodule-name">'
      //     temp += '<td>@module-name</td>'
      //     temp += '<td>@submodule-name</td>'
      //     temp += '<td data-tipo="permiso">'
      //     temp += '<input type="checkbox" class="check-permiso">'
      //     temp += '</td>'
      //     temp += '</tr>'
      //
      //     temp = temp.replace(/@module-name/g, permiso.modulo);
      //     temp = temp.replace(/@submodule-name/g, permiso.submodulo);
      //
      //     table.find('tbody').append(temp)
      //
      //   }
      //
      //   icono = ''
      //   icono += '<a href="javascript:;" class="btn btn-xs btn-permission btn-grey ml-1" data-toggle="tooltip" data-placement="top" title="@permission-name">'
      //   icono += '<i class="@permission-icon"></i>'
      //   icono += '</a>'
      //
      //   icono = icono.replace(/@permission-icon/g, permiso.icono);
      //   icono = icono.replace(/@permission-name/g, permiso.nombre);
      //
      //   table.find('tr[data-module="'+permiso.modulo+'"][data-submodule="'+permiso.submodulo+'"] td[data-tipo="permiso"]').append(icono)

      }
    },
    methods: {
      submit: function () {
        console.log('Se ejecuta el método submit')
      }
    }
  })

  $(document).ready(function() {
    App.init();
    FormSliderSwitcher.init();
    FormPlugins.init();
    TreeView.init();


    Permisos.init();

    $(function () {

      $(".multiple-select2").select2({});

      $('[data-toggle="tooltip"]').tooltip()

      $('.btn-permission').click(function(){
        if ($(this).hasClass("btn-primary")){
          $(this).removeClass("btn-primary")
          $(this).addClass("btn-grey")
        } else{
          $(this).addClass("btn-primary")
          $(this).removeClass("btn-grey")
        }
      })

      $('.check-permiso').click(function(){
        if($(this).is(':checked')){
          $(this).parent().find('.btn-permission').addClass("btn-primary")
          $(this).parent().find('.btn-permission').removeClass("btn-grey")
        } else{
          $(this).parent().find('.btn-permission').removeClass("btn-primary")
          $(this).parent().find('.btn-permission').addClass("btn-grey")
        }
      })
    })

    $('.s-perfil').on("change", function(e){
      $('.table-permisos tbody tr').find('.btn-permission').removeClass("btn-grey")
      $('.table-permisos tbody tr').find('.btn-permission').removeClass("btn-primary")
      $('.table-permisos tbody tr .btn-permission').each(function(){
        if (Math.round(Math.random()*1)) {
          $(this).addClass("btn-grey")
        } else{
          $(this).addClass("btn-primary")
        }
      })
    });

    $("#buscar").on("keyup", function() {
      var value = $(this).val().toLowerCase();
      $(".table-permisos tbody tr").filter(function() {
        $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
      });
    });

    var table_language = {
      "decimal": "-",
      "thousands": ".",
      'emptyTable': 'Sin Datos',
      'info': 'mostranto _END_ de _TOTAL_ registros',
      'infoEmpty': '0-0 de 0',
      'infoFiltered': '',
      'infoPostFix': '',
      'lengthMenu': '_MENU_',
      'loadingRecords': 'Cargando...',
      'processing': 'Procesando...',
      'search': '',
      'searchPlaceholder': 'Buscar',
      'zeroRecords': 'No se encontraron registros',
      'paginate': {
        'first': 'Primero',
        'last': 'Último',
        'next': 'Próximo',
        'previous': 'Anterior'
      }
    };

    $('#s-modulo').on("change", function (e) {
      $('#t-permisos tbody tr').addClass('hide')
      var modulos = $('#s-modulo').val()
      for (var i = 0; i < modulos.length; i++) {
        $('#t-permisos tbody tr.modulo-'+modulos[i]).removeClass('hide')
      }
    });

  });
</script>
<style>


</style>
</body>
</html>
